# Generated by Django 5.2.5 on 2025-08-27 22:24

import django.db.models.deletion
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('repairs', '0001_initial'),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='appointment',
            options={'ordering': ['-start'], 'verbose_name': 'Запись', 'verbose_name_plural': 'Записи'},
        ),
        migrations.AlterModelOptions(
            name='modelrepairprice',
            options={'ordering': ['phone_model__brand__name', 'phone_model__name', 'repair_type__name'], 'verbose_name': 'Цена ремонта по модели', 'verbose_name_plural': 'Цены ремонтов по моделям'},
        ),
        migrations.AlterModelOptions(
            name='phonebrand',
            options={'ordering': ['name'], 'verbose_name': 'Бренд', 'verbose_name_plural': 'Бренды'},
        ),
        migrations.AlterModelOptions(
            name='phonemodel',
            options={'ordering': ['brand__name', 'name'], 'verbose_name': 'Модель телефона', 'verbose_name_plural': 'Модели телефонов'},
        ),
        migrations.AlterModelOptions(
            name='referralpartner',
            options={'ordering': ['name'], 'verbose_name': 'Партнёр (продавец)', 'verbose_name_plural': 'Партнёры (продавцы)'},
        ),
        migrations.AlterModelOptions(
            name='referralredemption',
            options={'ordering': ['-created_at'], 'verbose_name': 'Использование реф-кода', 'verbose_name_plural': 'Использования реф-кодов'},
        ),
        migrations.AlterModelOptions(
            name='repairtype',
            options={'ordering': ['name'], 'verbose_name': 'Тип ремонта', 'verbose_name_plural': 'Типы ремонта'},
        ),
        migrations.AlterModelOptions(
            name='technician',
            options={'ordering': ['name'], 'verbose_name': 'Мастер', 'verbose_name_plural': 'Мастера'},
        ),
        migrations.AlterModelOptions(
            name='timeoff',
            options={'ordering': ['start'], 'verbose_name': 'Отсутствие мастера', 'verbose_name_plural': 'Отсутствия мастеров'},
        ),
        migrations.AlterModelOptions(
            name='workinghour',
            options={'ordering': ['weekday', 'start'], 'verbose_name': 'Часы работы', 'verbose_name_plural': 'Часы работы'},
        ),
        migrations.AlterField(
            model_name='appointment',
            name='created_at',
            field=models.DateTimeField(auto_now_add=True, verbose_name='Создано'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='customer_name',
            field=models.CharField(max_length=120, verbose_name='Имя клиента'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='customer_phone',
            field=models.CharField(max_length=20, verbose_name='Телефон клиента'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='discount_amount',
            field=models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Скидка'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='end',
            field=models.DateTimeField(verbose_name='Окончание'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='phone_model',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='appointments', to='repairs.phonemodel', verbose_name='Модель'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='price_final',
            field=models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Итоговая цена'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='price_original',
            field=models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Цена до скидки'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='referral_code',
            field=models.CharField(blank=True, max_length=16, verbose_name='Код продавца'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='repair_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='appointments', to='repairs.repairtype', verbose_name='Тип ремонта'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='start',
            field=models.DateTimeField(verbose_name='Начало'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='status',
            field=models.CharField(choices=[('new', 'Новая'), ('confirmed', 'Подтверждена'), ('done', 'Завершена'), ('cancelled', 'Отмена')], default='new', max_length=12, verbose_name='Статус'),
        ),
        migrations.AlterField(
            model_name='appointment',
            name='technician',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='appointments', to='repairs.technician', verbose_name='Мастер'),
        ),
        migrations.AlterField(
            model_name='modelrepairprice',
            name='duration_min',
            field=models.PositiveIntegerField(verbose_name='Длительность (мин)'),
        ),
        migrations.AlterField(
            model_name='modelrepairprice',
            name='is_active',
            field=models.BooleanField(default=True, verbose_name='Активна'),
        ),
        migrations.AlterField(
            model_name='modelrepairprice',
            name='phone_model',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prices', to='repairs.phonemodel', verbose_name='Модель'),
        ),
        migrations.AlterField(
            model_name='modelrepairprice',
            name='price',
            field=models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Цена (€)'),
        ),
        migrations.AlterField(
            model_name='modelrepairprice',
            name='repair_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='model_prices', to='repairs.repairtype', verbose_name='Тип ремонта'),
        ),
        migrations.AlterField(
            model_name='phonebrand',
            name='name',
            field=models.CharField(max_length=50, unique=True, verbose_name='Название бренда'),
        ),
        migrations.AlterField(
            model_name='phonebrand',
            name='slug',
            field=models.SlugField(unique=True, verbose_name='Слаг'),
        ),
        migrations.AlterField(
            model_name='phonemodel',
            name='brand',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='models', to='repairs.phonebrand', verbose_name='Бренд'),
        ),
        migrations.AlterField(
            model_name='phonemodel',
            name='name',
            field=models.CharField(max_length=80, verbose_name='Модель'),
        ),
        migrations.AlterField(
            model_name='phonemodel',
            name='slug',
            field=models.SlugField(unique=True, verbose_name='Слаг'),
        ),
        migrations.AlterField(
            model_name='referralpartner',
            name='client_discount_pct',
            field=models.DecimalField(decimal_places=2, default=Decimal('5.00'), max_digits=4, verbose_name='Скидка клиенту (%)'),
        ),
        migrations.AlterField(
            model_name='referralpartner',
            name='code',
            field=models.CharField(max_length=16, unique=True, verbose_name='Код'),
        ),
        migrations.AlterField(
            model_name='referralpartner',
            name='contact',
            field=models.CharField(blank=True, max_length=120, verbose_name='Контакты'),
        ),
        migrations.AlterField(
            model_name='referralpartner',
            name='expires_at',
            field=models.DateTimeField(blank=True, null=True, verbose_name='Действует до'),
        ),
        migrations.AlterField(
            model_name='referralpartner',
            name='max_uses',
            field=models.PositiveIntegerField(blank=True, null=True, verbose_name='Макс. использований'),
        ),
        migrations.AlterField(
            model_name='referralpartner',
            name='name',
            field=models.CharField(max_length=120, verbose_name='Партнёр (продавец)'),
        ),
        migrations.AlterField(
            model_name='referralpartner',
            name='partner_commission_pct',
            field=models.DecimalField(decimal_places=2, default=Decimal('5.00'), max_digits=4, verbose_name='Комиссия партнёру (%)'),
        ),
        migrations.AlterField(
            model_name='referralredemption',
            name='appointment',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='referrals', to='repairs.appointment', verbose_name='Запись'),
        ),
        migrations.AlterField(
            model_name='referralredemption',
            name='commission_amount',
            field=models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Комиссия партнёра'),
        ),
        migrations.AlterField(
            model_name='referralredemption',
            name='created_at',
            field=models.DateTimeField(auto_now_add=True, verbose_name='Создано'),
        ),
        migrations.AlterField(
            model_name='referralredemption',
            name='discount_amount',
            field=models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Сумма скидки'),
        ),
        migrations.AlterField(
            model_name='referralredemption',
            name='partner',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='redemptions', to='repairs.referralpartner', verbose_name='Партнёр'),
        ),
        migrations.AlterField(
            model_name='referralredemption',
            name='phone',
            field=models.CharField(max_length=20, verbose_name='Телефон клиента'),
        ),
        migrations.AlterField(
            model_name='repairtype',
            name='default_duration_min',
            field=models.PositiveIntegerField(default=60, verbose_name='Длительность по умолчанию (мин)'),
        ),
        migrations.AlterField(
            model_name='repairtype',
            name='name',
            field=models.CharField(max_length=80, verbose_name='Тип ремонта'),
        ),
        migrations.AlterField(
            model_name='repairtype',
            name='slug',
            field=models.SlugField(unique=True, verbose_name='Слаг'),
        ),
        migrations.AlterField(
            model_name='technician',
            name='name',
            field=models.CharField(max_length=80, verbose_name='Имя мастера'),
        ),
        migrations.AlterField(
            model_name='technician',
            name='skills',
            field=models.ManyToManyField(related_name='technicians', to='repairs.repairtype', verbose_name='Навыки'),
        ),
        migrations.AlterField(
            model_name='timeoff',
            name='end',
            field=models.DateTimeField(verbose_name='По'),
        ),
        migrations.AlterField(
            model_name='timeoff',
            name='reason',
            field=models.CharField(blank=True, max_length=120, verbose_name='Причина'),
        ),
        migrations.AlterField(
            model_name='timeoff',
            name='start',
            field=models.DateTimeField(verbose_name='С'),
        ),
        migrations.AlterField(
            model_name='timeoff',
            name='technician',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='time_off', to='repairs.technician', verbose_name='Мастер'),
        ),
        migrations.AlterField(
            model_name='workinghour',
            name='end',
            field=models.TimeField(verbose_name='Конец'),
        ),
        migrations.AlterField(
            model_name='workinghour',
            name='start',
            field=models.TimeField(verbose_name='Начало'),
        ),
        migrations.AlterField(
            model_name='workinghour',
            name='weekday',
            field=models.IntegerField(choices=[(0, 'Понедельник'), (1, 'Вторник'), (2, 'Среда'), (3, 'Четверг'), (4, 'Пятница'), (5, 'Суббота'), (6, 'Воскресенье')], verbose_name='День недели'),
        ),
    ]
