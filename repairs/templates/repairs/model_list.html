{% extends "repairs/base.html" %}
{% load repairs_extras %}
{% block title %}Модели — {{ brand.name }}{% endblock %}
{% block content %}
<style>
  *{box-sizing:border-box}
  .muted{color:#64748b}

  /* ——— КНОПКА НАЗАД ——— */
  .back-wrap{margin:2px 0 12px}
  .btn-back{
    --bg:#fff; --ink:#111; --brd:#000;
    display:inline-flex; align-items:center; gap:10px;
    padding:12px 16px; border-radius:12px;
    border:1px solid var(--brd); background:var(--bg); color:var(--ink);
    text-decoration:none; line-height:1; font-weight:600;
    transition:background .2s,color .2s,box-shadow .2s,transform .15s,border-color .2s;
    will-change: transform;
  }
  .btn-back svg{width:18px;height:18px;stroke:currentColor;transition:transform .2s}
  .btn-back:hover{
    background:#111; color:#fff; border-color:#111;
    box-shadow:0 6px 14px rgba(0,0,0,.08);
  }
  .btn-back:hover svg{transform:translateX(-2px)}
  .btn-back:active{transform:translateY(1px)}
  .btn-back:focus-visible{outline:3px solid #111; outline-offset:2px}

  /* ——— ЧИПЫ ——— */
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0 16px}
  .chip{padding:8px 12px;border:1px solid #e5e7eb;border-radius:999px;text-decoration:none;color:#111;display:inline-block}
  .chip.active{background:#111;color:#fff;border-color:#111}

  /* ——— СЕТКА КАРТОЧЕК ——— */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}

  .card{
    border:1px solid #000;           /* чёрная обводка */
    border-radius:12px;
    padding:12px;background:#fff;
    display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center;
    transition:border-color .15s, box-shadow .15s, background-color .15s;
  }
  .card:hover{background:#fafafa;box-shadow:0 1px 0 rgba(0,0,0,.04)}

  .info .name{font-weight:600;margin-bottom:4px;line-height:1.25}
  .info .name .paren{font-size:.85em;color:#64748b;font-weight:500;margin-left:4px}

  .meta{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
  .badge{font-size:12px;color:#111;background:#f3f4f6;border-radius:999px;padding:4px 8px}

  .btn{
    display:inline-flex;justify-content:center;align-items:center;padding:10px 14px;
    border-radius:10px;background:#111;color:#fff;text-decoration:none;white-space:nowrap;border:1px solid #111;
    transition:opacity .15s, transform .1s;
  }
  .btn:hover{opacity:.95}
  .btn:active{transform:translateY(1px)}

  /* ——— МОБИЛЬНАЯ АДАПТАЦИЯ ——— */
  @media (max-width:560px){
    .grid{grid-template-columns:1fr}
    .card{grid-template-columns:1fr}
    .card .btn{width:100%;margin-top:6px}
    .btn-back{width:100%; justify-content:center}   /* ← на мобилке на всю ширину */
  }
</style>

<div class="back-wrap">
  <a class="btn-back" href="{% url 'repairs:brand_list' %}?cat={{ selected_cat }}">
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M15 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span>Назад к брендам</span>
  </a>
</div>

<h1>{{ brand.name }} — модели</h1>

<div class="chips">
  {% for key,label in categories %}
    {% if selected_cat == key %}
      <span class="chip active">{{ label }}</span>
    {% else %}
      <a class="chip" href="?cat={{ key }}">{{ label }}</a>
    {% endif %}
  {% endfor %}
</div>

{% if models %}
  <div class="grid">
    {% for m in models %}
      <div class="card">
        <div class="info">
          <div class="name">{{ m.name|shrink_parens }}</div>
          <div class="meta">
            <span class="muted">{{ brand.name }}</span>
            <span class="badge">
              {% if m.category == 'phone' %}Телефон{% elif m.category == 'tablet' %}Планшет{% else %}Смарт-часы{% endif %}
            </span>
          </div>
        </div>
        <a class="btn" href="{% url 'repairs:repair_list' brand_slug=brand.slug model_slug=m.slug %}">Выбрать</a>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="muted">Нет моделей выбранной категории.</p>
{% endif %}
{% endblock %}
